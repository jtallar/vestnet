<head>
  <!-- build:css(.tmp) styles/detail.css -->
  <link rel="stylesheet" href="styles/detail.css">
  <!-- endbuild -->

  <!-- build:css(.tmp) styles/feed.css -->
  <link rel="stylesheet" href="styles/feed.css">
  <!-- endbuild -->

</head>

<vnheader></vnheader>

<body ng-controller="singleViewCtrl">
<!-- Set used variables -->
<!--
<sec:authorize access="isAuthenticated()">
  <sec:authentication var="session_user_id" property="principal.id"/>
  <sec:authentication var="session_user_mail" property="principal.username"/>
</sec:authorize>

<sec:authorize access="!isAuthenticated()">
  <c:set var="session_user_id" value="0"/>
</sec:authorize>
-->

<!-- Message and Back logic -->
<div class="container" style="margin-top: 20px">
    <div class="d-flex justify-content-between align-self-center" style="margin-right:6%">
      <div class="p-2 mx-3 my-1">
        <button ng-click="backAction()" class="btn btn-dark"> {{'back' | translate}} </button>
      </div>
      <div class="p-2 ml-8" id="mail-feedback" ng-if="sent == true">
        <h5 class="card-title mr-4" style="margin-top: 15px; color: #750096"> {{'successfullContact' | translate : '{name : project.owner.firstName}'}} </h5>
      </div>
    </div>

    <div class="row" style="margin: 0">
      <div class="col-5">
        <div id="carouselExampleCaptions" class="carousel slide" data-ride="carousel" style="width: 100%; margin: 0 auto">
          <ol class="carousel-indicators" id="carousel-slides">
          </ol>

          <div class="carousel-inner">
            <div id="carousel-items">
              <div class="carousel-item active">
                <img src="/images/projectNoImage.png" class="proj-img" alt="{{'projectImage' | translate}}" aria-placeholder="{{'projectImage' | translate}}"/>
              </div>
            </div>
          </div>
          <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="false"></span>
            <span class="sr-only">Previous</span>
          </a>
          <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="false"></span>
            <span class="sr-only">Next</span>
          </a>
        </div>
      </div>

      <!-- Favorite icon logic -->
      <div class="col-6">
        <div class="d-flex justify-content-center">
          <div class="card description mb-3">
            <!--
            <sec:authorize access="hasRole('ROLE_INVESTOR')">
              <div class="card-header header-white">
                <button onclick="favTap()" class="btn-transp pull-right">
                  <c:choose>
                    <c:when test="${user.favorites.contains(project)}">
                      <c:set var="icon_fav" value="${icon_fav_on}"/>
                    </c:when>
                    <c:otherwise>
                      <c:set var="icon_fav" value="${icon_fav_off}"/>
                    </c:otherwise>
                  </c:choose>
                  <img id="favImg" src="${icon_fav}" height="40">
                </button>
              </div>
            </sec:authorize> -->

            <!-- Project card -->
            <div class="card-body">
              <h5 class="card-title"><b>{{project.name}}</b></h5>
              <div class="blockquote-footer">by {{project.owner.firstName}}
                {{project.owner.lastName}}</div>
              <p class="card-text">{{project.summary}}</p>

              <h5 class="card-title"><b>{{'categories' | translate}}</b></h5>
                <li ng-repeat="category in project.categories">{{category}}</li>
              <br/>
              <h5 class="card-title"><b>{{'totalCost' | translate}}</b></h5>

              <p>{{'projectCost' | translate : '{cost: project.cost}'}}</p>

              <h5 class="card-title"><b>{{'contactMail' | translate}}</b></h5>
              <p>{{project.owner.mail}}</p>

              <!--
              <sec:authorize access="isAnonymous()">
                <h5><a href="" class="btn btn-dark btn-sm" data-toggle="modal" data-target="#expFunding">
                  <spring:message code="singleView.button.createToViewProfile"/>
                </a></h5>
              </sec:authorize>
              -->

              <!-- Authorization needed -->
              <!--
              <div class="modal fade" id="expFunding" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                <div class="modal-dialog " role="document">
                  <div class="modal-content mx-auto my-auto">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLabel">
                        <spring:message code="aut_needed"/>
                      </h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <spring:message code="aut_text"/>
                    </div>
                    <div class="modal-footer">
                      <div class="row">

                        <a href="<c:url value="/login"/> " type="button" class="btn btn-dark">
                        <spring:message code="header./login"/>
                        </a>

                        <a href="<c:url value="/signUp"/> " type="button" class="btn btn-dark">
                        <spring:message code="sign_up"/>
                        </a>
                      </div>
                    </div>
                  </div>
                </div>

              </div>
              -->

              <h5  ng-if="userId != project.owner.id"><a href="<c:url value='/users/${project.owner.id}?back=yes'/>"
                         class="btn btn-dark btn-sm">{{'viewProfile' | translate}}</a></h5>
              <div class="dropdown-divider"></div>

              <p class="card-text"><small class="text-muted">{{'lastUpdate' | translate: '{date : project.updateDate}' }}</small></p>
            </div>
          </div>
        </div>

        <!-- Contact button -->
        <div class="d-flex justify-content-end">
          <!--
          <sec:authorize access="isAnonymous()">
            <button class="btn btn-dark btn-lg btn-block" aria-controls="contact" id="contact-login-button" data-toggle="modal" data-target="#expFunding">
              <spring:message code="singleView.button.createToContactOwner"/>
            </button>
          </sec:authorize>

          <sec:authorize access="hasRole('ROLE_INVESTOR')">
            <c:choose>
              <c:when test="${lastMessage.isPresent() and lastMessage.get().accepted eq null}">
                <button class="btn btn-dark btn-lg btn-block" id="contact-already-sent-button" disabled>
                  <spring:message code="singleView.button.alreadySent"/>
                </button>
              </c:when>
              <c:otherwise>
                <button class="btn btn-dark btn-lg btn-block" data-toggle="collapse"
                        data-target="#contact" aria-expanded="false" aria-controls="contact" id="contact-expand-button">
                  <spring:message code="contactowner"/>
                </button>
              </c:otherwise>
            </c:choose>
          </sec:authorize>
          -->
        </div>
      </div>
    </div>
    <!--
    <sec:authorize access="hasRole('ROLE_INVESTOR')">
      <div class="collapse" id="contact">
        <div class="card contact">
          <div class="card-header">
            <spring:message code="contact.header" arguments="${project.owner.firstName},${project.owner.lastName}" var="contactHeaderVar"/>
            <label class="label-header"><c:out value="${contactHeaderVar}"/></label>
            <button class="btn btn-dark pull-right" type="button" data-toggle="collapse"
                    data-target="#contact" aria-expanded="false" aria-controls="contact">X
            </button>
          </div>
          <div class="card-body">
            <c:url value="/projects/${project.id}" var="postPath"/>
            <form:form modelAttribute="mailForm" action="${postPath}" method="post">

              <div class="form-group">
                <label><spring:message code="contact.bodyMessage"/></label>
                <div class="input-group mb-3">
                  <spring:message code="writemessage" var="placeholdermessage"/>
                  <form:textarea path="body" type="text" class="form-control"
                                 placeholder="${placeholdermessage}" aria-describedby="basic-addon2"/>
                </div>
                <form:errors path="body" cssClass="formError"/>
              </div>

              <div class="container-contact">
                <div class="row">
                  <div class="col-2">
                    <label><spring:message code="contact.offerMessage"/></label>
                  </div>
                  <div class="col-md-5">
                    <div class="row justify-content-center">
                      <div class="col-2">
                        <label><spring:message code="currency"/></label>
                      </div>
                      <div class="col">
                        <spring:message code="writemessage" var="placeholderoffers"/>
                        <form:input path="offers" type="number" class="form-control"
                                    placeholder="${placeholderoffers}"
                                    aria-describedby="basic-addon2" id="contact-offer"/>
                      </div>
                    </div>
                  </div>
                </div>
                <form:errors path="offers" cssClass="formError"/>
              </div>

              <div class="container-contact">
                <div class="row">
                  <div class="col-2">
                    <label><spring:message code="contact.exchangeMessage"/></label>
                  </div>
                  <div class="col-md-5">
                    <spring:message code="writemessage" var="placeholderexchange"/>
                    <form:textarea path="exchange" type="text" class="form-control"
                                   placeholder="${placeholderexchange}"
                                   aria-describedby="basic-addon2"/>
                  </div>
                </div>
                <form:errors path="exchange" cssClass="formError"/>
              </div>

              <form:input path="receiverId" value="${project.owner.id}" type="hidden"/>

              <div class="text-right">
                <input type="submit" value="<spring:message code="send"/>" class="btn btn-dark"
                onclick="adjustInputs()" id="contact-send"/>
              </div
            </form:form>
          </div>
        </div>
      </div>
    </sec:authorize>
    -->
</div>
</div>

</body>

<footer>
  <vnfooter></vnfooter>
</footer>

