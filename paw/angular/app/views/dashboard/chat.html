

<body ng-controller="chatCtrl">
<vnheader></vnheader>

<!--<div class="row">-->
<!--  -->
<!--</div>-->
<!-- Message and Back logic -->
<div class="chatscreen sep-nav">

    <div class="d-flex justify-content-between align-self-center" style="margin-right:6%">
      <div class="p-2 mx-3 my-1">
        <button ng-click="backAction()" class="btn btn-dark"> {{'back' | translate}} </button>
      </div>
    </div>

    <div class="row" style="margin-top: 10px">

      <div class="col-2 card chat-ficha">
        <h4 class="chat-p-name">{{project.name}}</h4>
        <img src="{{project.image}}" class="chat-p-img" alt=""/>
        <p><i>{{project.summary}}</i></p>
        <h6><i>{{project.funded}} Funded</i></h6>
      </div>

      <div class="col-8">
        <div class="d-flex justify-content-center">
          <div class="row">
            <div class="card chatbox mb-3">
              <div class="chat-header">
                <div class="row">
                  <div class="col-3">
                    <img src="{{chats[0].picture}}" class="chat-img" alt=""/>
                  </div>
                  <div class="center-vertical col-6">
                    <h5 class="center-vertical chatbox-header">
                      {{chats[0].from}} - {{'entrepreneur' | translate}}
                    </h5>
                  </div>
                  <div class="col-3 center-vertical blockquote-footer mini-text">{{'lastChat' | translate}}: {{chats[n_chats-1].date}}</div>
                </div>
              </div>
              <div class="chatbox-body card-body" id="chatbox-scroll">
                <div ng-repeat="chat in chats">
                  <div ng-if="chat.from != 'Me'">
                    <div class="card chat-card-other">
                      <div class="card-body chat-other">
                        <div class="row">
                          <div class="col-6 msg-offer">
                            <img src="images/down-arrow.png" alt="">
                            <strong>{{chat.offer}}</strong>
                          </div>
                          <div class="col-6 msg-exp-me">
                            {{'expire' | translate}} {{chat.exp}} {{'days' | translate}}
                            <img src="images/clock-icon.png" alt="">
                          </div>
                        </div>
                        <div class="msg-exch">
                          <img src="images/up-arrow.png" alt="">
                          <strong> {{chat.exchange}}</strong>
                        </div>
                        <div class="msg-comm">
                          <strong> {{chat.comment}}</strong>
                        </div>
                      </div>
                      <div class="card-footer chat-date">
                        {{chat.date}}
                      </div>
                    </div>
                  </div>

                  <div ng-if="chat.from == 'Me'">
                    <div class="card chat-card-me">
                      <div class="card-body chat-me">
                          <div class="row">
                            <div class="col-6 msg-exp">
                              <img src="images/clock-icon.png" alt="">
                              {{'expire' | translate}} {{chat.exp}} {{'days' | translate}}
                            </div>
                            <div class="col-6 msg-offer">
                              <strong>{{chat.offer}}</strong>
                              <img src="images/down-arrow.png" alt="">
                            </div>
                          </div>
                          <div class="msg-exch">
                            <strong> {{chat.exchange}}</strong>
                            <img src="images/up-arrow.png" alt="">
                          </div>
                          <div class="msg-comm">
                            <strong> {{chat.comment}}</strong>
                          </div>

                      </div>
                      <div class="card-footer chat-date-me">
                        {{chat.date}}
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          </div>

<!--        <div class="row chat-options">-->
<!--            <div class="col-6">-->
<!--              <a ng-click="" class="btn btn-success btn-project"  type="button">-->
<!--                <div class="chat-opt">-->
<!--                  <img class="" src="images/accept-icon.png" alt="">-->
<!--                </div>-->
<!--              </a>-->
<!--            </div>-->

<!--            <div class="col-6">-->
<!--              <a ng-click="" class="btn btn-danger btn-project"  type="button" data-toggle="collapse"-->
<!--                 data-target="#newoffer" aria-expanded="false" aria-controls="newoffer">-->
<!--                <div class="chat-opt">-->
<!--                  <img class="" src="images/reject-icon.png" alt="">-->
<!--                </div>-->
<!--              </a>-->
<!--            </div>-->
<!--        </div>-->

        <div class="row">
          <div class="center-collapse collapse" id="newoffer">
            <div class="card chat-offer">
              <div class="card-header">
                <div class="row">
                  <img class="nav-icon" src="/images/chat-icon.png" alt="">
                  <h5>{{'counteroffer' | translate}}</h5>
                </div>
              </div>
              <div class="card-body offer-body row">
                <div class="col-11">
                  <div class="row chat-input">
                    <div class="col-4">
                      <input type="text" class="form-control" placeholder="{{'msgTitleOffer' | translate}}" id="msg-offer-title"/>
                    </div>
                    <div class="col-5">
                      <input type="text" class="form-control" placeholder="{{'msgTitleRequest' | translate}}" id="msg-req-title"/>
                    </div>
                    <div class="col-3">
                      <select id="expire" class="custom-select mr-sm-2">
                        <option value="0">{{'expire' | translate}}</option>
                        <option ng-repeat="x in [].constructor(30) track by $index"> {{$index+1}} days</option>
                      </select>
                    </div>
                  </div>
                  <div class="row">
                    <textarea class="chat-text form-control" placeholder="{{'comments' | translate}}" rows="2" id="msg-comment-title"></textarea>
                  </div>
                </div>
                <div class="col-1">
                  <a class="btn btn-inv pull-right" data-toggle="modal" data-target="#confirmsend">
                    <img class="send-icon" src="/images/send-icon.png" alt="">
                  </a>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="col-1">

        <div class="row chat-options">
          <div class="col-">
            <a ng-click="" class="btn chat-opt" type="button" data-toggle="modal" data-target="#confirmaccept">
              <div class="chat-opt">
                <img class="" src="images/accept-icon.png" alt="">
              </div>
            </a>
          </div>
          <div class="col-">
            <a ng-click="" class="btn chat-opt"  type="button" data-toggle="collapse"
               data-target="#newoffer" aria-expanded="false" aria-controls="newoffer">
              <div class="chat-opt">
                <img class="" src="images/reject-icon.png" alt="">
              </div>
            </a>
          </div>
        </div>

      </div>

    </div>
</div>


<div class="modal fade" id="confirmsend" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog popup" role="document">
    <div class="modal-content mx-auto my-auto">
      <div class="modal-header">
        <h5 class="modal-title">
          <strong>{{'confSend' | translate }}</strong>
        </h5>
      </div>
      <div class="modal-body">
        {{'confSendBody' | translate }}
      </div>
      <div class="modal-footer">
        <div class="row">
          <button type="button" class="btn btn-danger" data-dismiss="modal">
            {{'cancel' | translate }}
          </button>
          <a onclick="location.href='/#/dashboard'" type="button" class="btn btn-success" data-dismiss="modal" style="color: white">
            {{'send' | translate }}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="confirmaccept" tabindex="-1" role="dialog"
     aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog popup" role="document">
    <div class="modal-content mx-auto my-auto">
      <div class="modal-header">
        <h5 class="modal-title">
          <strong>{{'confAccept' | translate }}</strong>
        </h5>
      </div>
      <div class="modal-body">
        {{'confAcceptBody' | translate }}
      </div>
      <div class="modal-footer">
        <div class="row">
          <button type="button" class="btn btn-danger" data-dismiss="modal">
            {{'cancel' | translate }}
          </button>
          <a onclick="location.href='/#/dashboard'" type="button" class="btn btn-success" data-dismiss="modal" style="color: white">
            {{'confirm' | translate }}
          </a>
        </div>
      </div>
    </div>
  </div>
</div>


</body>

<footer>
  <vnfooter></vnfooter>
</footer>

